# API ν”„λ΅μ‹ μ„¤μ • μ™„λ£

CORS λ¬Έμ λ¥Ό ν•΄κ²°ν•κΈ° μ„ν•΄ PHP ν”„λ΅μ‹λ¥Ό μ„¤μ •ν–μµλ‹λ‹¤.

## π“ μƒμ„±λ νμΌλ“¤

1. **`api_proxy.php`** - λ©”μΈ ν”„λ΅μ‹ νμΌ (CORS μ°νμ©)
2. **`test_proxy.php`** - ν”„λ΅μ‹ ν…μ¤νΈ νμ΄μ§€ 
3. **`JS/rawDataBox.js`** - μμ •λ JavaScript (ν”„λ΅μ‹ μ‚¬μ©ν•λ„λ΅ λ³€κ²½)

## π€ μ‚¬μ© λ°©λ²•

### 1λ‹¨κ³„: PHP μ„λ²„ μ‹¤ν–‰
λ΅μ»¬μ—μ„ PHP μ„λ²„λ¥Ό μ‹¤ν–‰ν•΄μ•Ό ν•©λ‹λ‹¤:

```bash
# ν”„λ΅μ νΈ ν΄λ”μ—μ„ μ‹¤ν–‰
cd /Users/sangreal/Documents/Project/NewNormal/Test_code/Frontend
php -S localhost:8000
```

### 2λ‹¨κ³„: ν…μ¤νΈ μ‹¤ν–‰
λΈλΌμ°μ €μ—μ„ λ‹¤μ URLλ΅ μ ‘μ†:

- **ν”„λ΅μ‹ ν…μ¤νΈ**: http://localhost:8000/test_proxy.php
- **λ©”μΈ νμ΄μ§€**: http://localhost:8000/rawDataIndex.html

## π”§ λ™μ‘ λ°©μ‹

```
ν΄λΌμ΄μ–ΈνΈ β†’ api_proxy.php β†’ https://lssatdk2.cafe24.com/test/main_api.php
```

1. JavaScriptμ—μ„ `./api_proxy.php`λ΅ μ”μ²­
2. PHP ν”„λ΅μ‹κ°€ μ‹¤μ  APIμ— cURLλ΅ μ”μ²­
3. μ‘λ‹µμ„ CORS ν—¤λ”μ™€ ν•¨κ» ν΄λΌμ΄μ–ΈνΈμ— λ°ν™

## π“ μ‘λ‹µ ν•νƒ

ν”„λ΅μ‹λ” λ‹¤μκ³Ό κ°™μ€ μ¶”κ°€ μ •λ³΄λ¥Ό ν¬ν•¨ν•©λ‹λ‹¤:

```json
{
  "success": true,
  "message": "μ›λ³Έ API λ©”μ‹μ§€",
  "items": [...],
  "proxy_status": "success",
  "proxy_timestamp": "2025-09-18 10:30:00"
}
```

### μƒνƒ μ½”λ“λ“¤
- `success`: μ •μƒ μ—°κ²°
- `success_non_json`: μ—°κ²° μ„±κ³µν•μ§€λ§ JSONμ΄ μ•„λ‹ μ‘λ‹µ
- `curl_error`: cURL μ”μ²­ μ‹¤ν¨
- `http_error`: HTTP μ¤λ¥ μ‘λ‹µ
- `exception`: ν”„λ΅μ‹ μ„λ²„ λ‚΄λ¶€ μ¤λ¥

## π” λ¬Έμ  ν•΄κ²°

### PHP μ„λ²„κ°€ μ‹¤ν–‰λμ§€ μ•λ” κ²½μ°
```bash
# PHP μ„¤μΉ ν™•μΈ
php --version

# λ‹¤λ¥Έ ν¬νΈλ΅ μ‹¤ν–‰
php -S localhost:8080
```

### CORS μ—¬μ „ν λ°μƒν•λ” κ²½μ°
- `file://` ν”„λ΅ν† μ½ λ€μ‹  `http://localhost:8000` μ‚¬μ©
- λΈλΌμ°μ € κ°λ°μ λ„κµ¬μ—μ„ λ„¤νΈμ›ν¬ νƒ­ ν™•μΈ

### API μ—°κ²°μ΄ μ• λλ” κ²½μ°
1. `test_proxy.php` νμ΄μ§€μ—μ„ μ§μ ‘ ν…μ¤νΈ
2. `api_proxy.php` νμΌμ SSL μ„¤μ • ν™•μΈ
3. λ°©ν™”λ²½/λ³΄μ• ν”„λ΅κ·Έλ¨ ν™•μΈ

## π›  μ»¤μ¤ν„°λ§μ΄μ§•

API μ—”λ“ν¬μΈνΈλ‚ νλΌλ―Έν„°λ¥Ό λ³€κ²½ν•λ ¤λ©΄:

1. **`api_proxy.php`** - κΈ°λ³Έ νλΌλ―Έν„° μμ •
2. **`JS/rawDataBox.js`** - RAW_PARAMS κ°μ²΄ μμ •

## π’΅ μ¶”κ°€ μ°Έκ³ μ‚¬ν•­

- λ΅μ»¬ κ°λ°μ©μ΄λ―€λ΅ SSL κ²€μ¦ λΉ„ν™μ„±ν™”λ¨
- ν”„λ΅λ•μ… ν™κ²½μ—μ„λ” λ³΄μ• μ„¤μ • κ°•ν™” ν•„μ”
- API μ‘λ‹µμ΄ JSONμ΄ μ•„λ‹ κ²½μ°λ„ μ²λ¦¬λ¨
